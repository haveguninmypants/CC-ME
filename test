-- Function to display a menu and get the user's selection with paging
function selectOption(options, prompt)
  local pageSize = 5
  local totalPages = math.ceil(#options / pageSize)
  local currentPage = 1

  while true do
    term.clear()
    term.setCursorPos(1, 1)
    print(prompt .. " (Page " .. currentPage .. " of " .. totalPages .. "):")

    local startIndex = (currentPage - 1) * pageSize + 1
    local endIndex = math.min(currentPage * pageSize, #options)

    for i = startIndex, endIndex do
      local option = options[i]
      print(i .. ". " .. option)
    end

    print("Enter the number of your choice (N for Next, P for Previous):")
    local choice = read()

    if tonumber(choice) then
      local numericChoice = tonumber(choice)
      if numericChoice >= 1 and numericChoice <= #options then
        return options[numericChoice]
      end
    elseif choice:lower() == "n" and currentPage < totalPages then
      currentPage = currentPage + 1
    elseif choice:lower() == "p" and currentPage > 1 then
      currentPage = currentPage - 1
    end
  end
end
